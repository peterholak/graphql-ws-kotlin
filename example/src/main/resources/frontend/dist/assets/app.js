webpackJsonp([0],{176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=function(e){for(var t=i.parse(e.query),n=0,r=t.definitions;n<r.length;n++){var o=r[n];if("OperationDefinition"===o.kind){if("subscription"===o.operation&&(void 0===e.operationName||o.name&&e.operationName===o.name.value))return!0}}return!1};t.graphQLFetcher=function(e,t,n){return function(i){if(r(i)){var o=e.subscribe({query:i.query,variables:i.variables,operationName:i.operationName},function(e,t){e?n(o,void 0,e):n(o,t,void 0)});return Promise.resolve("Subscription id is "+o+". Data received via subscriptions will appear in the area above")}return t(i)}}},178:function(e,t){e.exports="subscription {\r\n  # Try pressing Ctrl+Space inside this block.\r\n  # You can only subscribe to a single subscription in one go.\r\n}\r\n\r\n# There are some queries and mutations in the schema as well...\r\n"},180:function(e,t,n){"use strict";function i(e){return fetch("http://"+d+"/graphql",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),a=n(92),c=n(177),u=n(176),l=n(179),p=n(178),d=window.location.host,h=new l.SubscriptionClient("ws://"+d+"/subscriptions",{reconnect:!0}),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={events:[],status:"disconnected"},t.fetcher=u.graphQLFetcher(h,i,t.onSubscriptionData.bind(t)),t.keyCounter=0,t}return r(t,e),t.prototype.componentDidMount=function(){var e=this;h.onConnecting(function(){return e.setState({status:"connecting"})}),h.onConnected(function(){return e.setState({status:"connected"})}),h.onDisconnected(function(){return e.setState({status:"disconnected"})}),h.onReconnecting(function(){return e.setState({status:"reconnecting"})}),h.onReconnected(function(){return e.setState({status:"reconnected"})})},t.prototype.render=function(){var e=this;return s.createElement("div",{style:{width:"100%",height:"100%"}},s.createElement("div",{style:{height:"30%",display:"flex"}},s.createElement("div",{style:{flexGrow:.25,overflow:"auto"}},s.createElement("h1",{style:m},"graphql-ws-kotlin example"),s.createElement("div",{style:E},"Try subscribing to `textPublished` in the graphiql editor below!"),s.createElement("div",{style:E},"Try opening this page in multiple tabs, or even on different devices!"),s.createElement("div",{style:{marginBottom:"10px"}},s.createElement("button",{style:b,onClick:this.publishText.bind(this)},"Publish text"),s.createElement("input",{defaultValue:"10",ref:function(t){return e.publishTextElement=t}})),s.createElement("div",null,s.createElement("button",{style:v,onClick:this.unsubscribeAll.bind(this)},"Unsubscribe all"),s.createElement("button",{style:v,onClick:this.clearLog.bind(this)},"Clear log")),s.createElement("div",{style:o({},g,{color:x[this.state.status]})},"WebSocket status: ",this.state.status)),s.createElement("div",{style:{flexGrow:.75,height:"100%",overflow:"auto",background:"#eee"}},s.createElement("h1",{style:m},"Notification log"),this.state.events.map(function(e){return s.createElement("div",{key:e.reactKey},JSON.stringify(e.payload))}))),s.createElement("div",{style:{height:"70%"}},s.createElement(c,{style:{flexGrow:1},fetcher:this.fetcher,defaultQuery:p})))},t.prototype.onSubscriptionData=function(e,t,n){this.keyCounter++,void 0!==t?this.setState({events:this.state.events.concat([{payload:{id:e,data:t},reactKey:this.keyCounter}])}):this.setState({events:this.state.events.concat([{payload:{id:e,errors:n},reactKey:this.keyCounter}])})},t.prototype.publishText=function(){fetch("http://"+d+"/publish-text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:this.publishTextElement.value})})},t.prototype.unsubscribeAll=function(){h.unsubscribeAll()},t.prototype.clearLog=function(){this.setState({events:[]})},t}(s.Component),y={padding:"5px 10px",background:"#444",color:"#fff",border:"1px solid #ccc",boxShadow:"4px 4px 4px #eee",margin:"0 5px"},b=o({},y,{background:"#00BCD4"}),v=o({},y,{background:"#EF9A9A"}),m={fontFamily:"sans-serif",margin:"5px",fontSize:"100%"},g={margin:"10px 5px",fontFamily:"sans-serif"},x={connected:"#43A047",connecting:"#F9A825",reconnected:"#43A047",reconnecting:"#F9A825",disconnected:"#F44336"},E={fontFamily:"sans-serif",margin:"5px",fontSize:"85%"};a.render(s.createElement(f,null),document.getElementById("app"))}},[180]);
//# sourceMappingURL=app.js.map